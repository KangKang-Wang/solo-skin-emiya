!function(t){var e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=25)}({25:function(t,e){const o=t=>{$("html ,body").animate({scrollTop:t},300)},i=$(".J_navbar"),n=$(".toTop"),s=$(".J_article__contents"),c=$(".J_share_wechat"),a=$(".J_qrcode");window.scrollManager=new class{constructor(){this.showBackToTopHeight=100,this.prevScrollY=$(window).scrollTop(),this.scrollY=$(window).scrollTop(),this.contentsStaticTop=$(".J_article__contents").prev().offset().top+$(".J_article__contents").prev().height(),this.isContentsFixed=!1,this.listen(),this.calculate()}checkNavbarFixed(){const t=i.height()+1;0!==this.scrollY?(i.addClass("is-fixed").css("top",-1*t),this.scrollY<this.prevScrollY?i.addClass("show"):i.removeClass("show")):i.removeClass("is-fixed").css("top",0)}checkBackToTop(){this.scrollY>this.showBackToTopHeight?n.fadeIn():n.fadeOut()}checkContents(){const t=$(".J_article__content");if(t.length<=0)return;const e=i.height(),o=t.offset().top+t.height(),n=this.scrollY+e+s.height();return n>=o&&this.isContentsFixed?(s.css({position:"absolute",top:o-s.height()}),void(this.isContentsFixed=!1)):this.scrollY+e<=this.contentsStaticTop?(s.css({position:"static",top:0}),void(this.isContentsFixed=!1)):this.scrollY+e>this.contentsStaticTop&&n<o?(s.css({position:"fixed",top:e}),void(this.isContentsFixed=!0)):void 0}checkContentsHighlight(){const t=i.height()+1,e=$(".J_article__contents--container a");let o;for(let i=0;i<e.length;i++){const n=e.eq(i).attr("data-target");this.scrollY+t>$(n).offset().top&&(o=i)}e.removeClass("active"),e.eq(o).addClass("active")}calculate(){this.checkNavbarFixed(),this.checkBackToTop(),this.checkContents(),this.checkContentsHighlight()}listen(){$(window).on("scroll",()=>{this.prevScrollY=this.scrollY,this.scrollY=$(window).scrollTop(),this.calculate()})}},window.Skin=new class{constructor(){this.listen(),this.shareURLs=this.initPageShare()}initPageShare(){const t=c.data("url"),e=c.data("avatar"),o=encodeURIComponent(`${c.data("title")} - ${c.data("blogtitle")}`),i=encodeURIComponent(t);return{weibo:`http://v.t.sina.com.cn/share/share.php?title=${o}&url=${i}&pic=${e}`,qzone:`https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=${i}&sharesource=qzone&title=${o}&pics=${e}`,wechat:t}}initContents(){const t={h1:5,h2:4,h3:3,h4:2,h5:1},e=this.getArticleTitles();if(0===e.length)return void $(".J_article__contents").hide();let o,i,n='<ul class="article__contents">';e.each((function(s,c){const a=t[c.tagName.toLowerCase()],r=e.eq(s).text(),l=$('<i><li><a href="javascript:void(0);" data-target="#'+e.eq(s).attr("id")+'"></a></li></i>');l.find("a").text(r);const h=l.html();a&&(i?a===o?n+=h:a<o?n+=Array(o-a).fill("<ul>").join("")+h:a>o&&(n+=Array(a-o).fill("</ul>").join("")+h):(n+=h,i=a),o=a)})),n+=Array(i-o+1).fill("</ul>").join(""),$(".J_article__contents--container").append(n)}getArticleTitles(){return $(".J_article__content [id*=_h]")}initArticle(){$(".J_article__contents").removeClass("fn__none");try{this.initContents()}catch(t){$(".J_article__contents").addClass("fn__none"),console.error(t)}}listen(){const t=this;$("body").on("touchstart",(function(){})),$(".J_navbar_toggle").on("click",(function(){const t="."+$(this).attr("data-for");$(t).hasClass("show")?$(t).removeClass("show"):$(t).addClass("show")})),$(".J_replyName").on("click",(function(){const t=$(this).attr("data-originalId");$("#"+t)[0].scrollIntoViewIfNeeded(!0),$("#"+t).addClass("blink"),setTimeout((function(){$("#"+t).removeClass("blink")}),3e3)})),$(".J_backToTop").on("click",(function(t){o(0),t.preventDefault()})),$("body").on("click",".J_article__contents--container a",(function(){const t=$(this).attr("data-target"),e=$(t).offset().top-$(".J_navbar").height()+1;o(e)})),$("body").on("click",".J_share",(function(){const e=$(this).data("type");if(e)if("wechat"!==e)window.open(t.shareURLs[e],"_blank","top=100,left=200,width=648,height=618");else if("undefined"==typeof QRious&&Util.addScript(Label.staticServePath+"/js/lib/qrious.min.js","qriousScript"),"none"===a.css("background-image")){const e=c.width(),o=new QRious({padding:0,element:a[0],value:t.shareURLs.wechat,size:e});a.css("background-image",`url(${o.toDataURL("image/jpeg")})`).css("height",e).css("width",e).css("bottom",c.height()).css("background-size",`${e}px ${e}px`),a.slideToggle()}else a.slideToggle()}))}},Util.initPjax(()=>{$(".J_article__contents").addClass("fn__none"),$(".J_article__contents--container").empty()})}});